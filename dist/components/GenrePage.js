import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState, useEffect, useMemo } from 'react';
import { ArrowLeft, HelpCircle, Sparkles, BookOpen, Percent, Award, Gem, TrendingUp, Star, Lightbulb, Users, Loader2, Bookmark } from 'lucide-react';
import BookCard from './BookCard';
import WideBookCard from './WideBookCard';
import { CATEGORY_DATA } from './CategoryGrid';
import { getBookSummary } from '../../services/geminiService';
const GenrePage = ({ genre, books, onBack, onAddToCart, onToggleWishlist, onQuickView, onPlayTrailer, wishlist }) => {
    const [currentSlide, setCurrentSlide] = useState(0);
    const [genreInsight, setGenreInsight] = useState(null);
    const [loadingInsight, setLoadingInsight] = useState(false);
    const genreInfo = CATEGORY_DATA.find(c => c.name === genre) || CATEGORY_DATA[0];
    const slides = [
        { url: `https://picsum.photos/seed/${genre}-1/1600/600`, title: `Explore ${genre}`, sub: `Diving deep into the heart of ${genre.toLowerCase()} literature.` },
        { url: `https://picsum.photos/seed/${genre}-2/1600/600`, title: 'Curated Excellence', sub: 'Hand-picked selections from our AI Librarian.' },
        { url: `https://picsum.photos/seed/${genre}-3/1600/600`, title: 'New Frontiers', sub: `Discover the latest trends in ${genre.toLowerCase()} today.` }
    ];
    const spotlightBooks = useMemo(() => books.slice(0, 5), [books]);
    const editorialPicks = useMemo(() => books.filter(b => b.rating >= 4.8 && !b.isNew).slice(0, 4), [books]);
    const risingStars = useMemo(() => books.filter(b => b.isNew).slice(0, 4), [books]);
    const hiddenGems = useMemo(() => books.filter(b => b.rating < 4.8 && !b.isNew && b.rating > 4.4).slice(0, 4), [books]);
    const saleBooks = useMemo(() => books.filter(b => b.discountPercentage).slice(0, 4), [books]);
    useEffect(() => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
        const timer = setInterval(() => {
            setCurrentSlide(prev => (prev + 1) % slides.length);
        }, 5000);
        const fetchInsight = async () => {
            setLoadingInsight(true);
            const insight = await getBookSummary(`The cultural and emotional significance of ${genre} literature in the 21st century.`);
            setGenreInsight(insight);
            setLoadingInsight(false);
        };
        fetchInsight();
        return () => clearInterval(timer);
    }, [genre]);
    const faqs = [
        { q: `What characterizes ${genre}?`, a: genreInfo.description },
        { q: `Why is this genre popular right now?`, a: `In a fast-paced world, ${genre.toLowerCase()} provides a unique lens through which we can process complex ideas and emotions.` },
        { q: `Where should I start with ${genre}?`, a: `We recommend starting with our "Lumina Choice" picks which represent the core values of ${genre.toLowerCase()}.` }
    ];
    return (_jsxs("div", { className: "animate-in fade-in duration-700 bg-white min-h-screen", children: [_jsx("div", { className: "bg-slate-900 py-4 border-b border-white/5 sticky top-0 z-[45] backdrop-blur-md bg-slate-900/90", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4 flex items-center justify-between", children: [_jsxs("button", { onClick: onBack, className: "flex items-center gap-2 text-indigo-400 hover:text-white transition-colors group font-bold", children: [_jsx(ArrowLeft, { className: "w-5 h-5 group-hover:-translate-x-1 transition-transform" }), "Library"] }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx(genreInfo.icon, { className: "w-5 h-5 text-indigo-400" }), _jsxs("span", { className: "text-white font-serif font-bold tracking-tight", children: [genre, " Hub"] })] }), _jsx("div", { className: "w-20" })] }) }), _jsxs("section", { className: "relative h-[65vh] overflow-hidden", children: [slides.map((slide, idx) => (_jsxs("div", { className: `absolute inset-0 transition-opacity duration-1000 ease-in-out ${idx === currentSlide ? 'opacity-100' : 'opacity-0 pointer-events-none'}`, children: [_jsx("img", { src: slide.url, className: "w-full h-full object-cover brightness-[0.35] scale-105", alt: slide.title }), _jsx("div", { className: "absolute inset-0 flex items-center justify-center text-center p-4", children: _jsxs("div", { className: "max-w-4xl space-y-6", children: [_jsx("span", { className: "inline-block px-4 py-1 bg-white/10 backdrop-blur-md rounded-full text-xs font-black uppercase tracking-[0.3em] text-white/80 animate-in slide-in-from-bottom-4", children: "Genre Hub Experience" }), _jsx("h1", { className: "text-6xl md:text-8xl font-serif font-bold text-white tracking-tight animate-in slide-in-from-bottom-8 duration-700", children: slide.title }), _jsx("p", { className: "text-xl text-white/70 font-light max-w-xl mx-auto animate-in slide-in-from-bottom-12 duration-1000", children: slide.sub })] }) })] }, idx))), _jsx("div", { className: "absolute bottom-10 left-1/2 -translate-x-1/2 flex gap-3", children: slides.map((_, i) => (_jsx("button", { onClick: () => setCurrentSlide(i), className: `h-1.5 transition-all duration-500 rounded-full ${i === currentSlide ? 'w-12 bg-white' : 'w-4 bg-white/20'}` }, i))) })] }), _jsx("section", { className: "py-24 bg-slate-50 relative overflow-hidden", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4", children: [_jsxs("div", { className: "flex items-center gap-3 mb-12", children: [_jsx("div", { className: "p-3 bg-indigo-600 rounded-2xl shadow-xl shadow-indigo-100", children: _jsx(Bookmark, { className: "w-6 h-6 text-white" }) }), _jsxs("div", { children: [_jsx("h2", { className: "text-3xl font-serif font-bold text-slate-900", children: "Genre Spotlight" }), _jsxs("p", { className: "text-slate-500 text-sm", children: ["Deep dives and premium editions in ", genre, "."] })] })] }), _jsx("div", { className: "flex overflow-x-auto pb-8 gap-6 no-scrollbar snap-x snap-mandatory", children: spotlightBooks.map(book => (_jsx("div", { className: "snap-start", children: _jsx(WideBookCard, { book: book, onAddToCart: onAddToCart, onQuickView: onQuickView }) }, book.id))) })] }) }), _jsx("section", { className: "py-24 bg-white relative overflow-hidden", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4 relative z-10", children: [_jsxs("div", { className: "flex flex-col md:flex-row items-end justify-between mb-12 gap-6", children: [_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center gap-2 text-indigo-600", children: [_jsx(Award, { className: "w-5 h-5" }), _jsx("span", { className: "text-xs font-black uppercase tracking-[0.3em]", children: "Editorial Picks" })] }), _jsx("h2", { className: "text-4xl font-serif font-bold text-slate-900 leading-tight", children: "Curated Masterpieces" })] }), _jsxs("p", { className: "text-slate-500 max-w-xs text-sm font-light", children: ["Our literary critics and AI models have identified these as the essential reading for any ", genre, " enthusiast."] })] }), _jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8", children: editorialPicks.map(book => (_jsx(BookCard, { book: book, onAddToCart: onAddToCart, onQuickView: onQuickView, onToggleWishlist: onToggleWishlist, isInWishlist: wishlist.some(w => w.id === book.id), onPlayTrailer: onPlayTrailer }, book.id))) })] }) }), _jsx("section", { className: "py-24 bg-slate-50 relative", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4", children: [_jsxs("div", { className: "flex items-center gap-3 mb-12", children: [_jsx("div", { className: "p-3 bg-indigo-600 rounded-2xl shadow-xl shadow-indigo-100", children: _jsx(TrendingUp, { className: "w-6 h-6 text-white" }) }), _jsxs("div", { children: [_jsx("h2", { className: "text-3xl font-serif font-bold text-slate-900", children: "Rising Stars" }), _jsxs("p", { className: "text-slate-500 text-sm", children: ["Fresh voices and new perspectives in ", genre, "."] })] })] }), _jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8", children: risingStars.map(book => (_jsx(BookCard, { book: book, onAddToCart: onAddToCart, onQuickView: onQuickView, onToggleWishlist: onToggleWishlist, isInWishlist: wishlist.some(w => w.id === book.id), onPlayTrailer: onPlayTrailer }, book.id))) })] }) }), saleBooks.length > 0 && (_jsx("section", { className: "py-24 bg-rose-50 border-y border-rose-100", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-12", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "p-3 bg-rose-500 rounded-2xl shadow-lg shadow-rose-200", children: _jsx(Percent, { className: "w-6 h-6 text-white" }) }), _jsxs("div", { children: [_jsx("h2", { className: "text-3xl font-serif font-bold text-slate-900", children: "Genre Flash Sale" }), _jsx("p", { className: "text-rose-600 text-xs font-bold uppercase tracking-widest", children: "Exclusive hub-only discounts" })] })] }), _jsxs("div", { className: "flex items-center gap-2 bg-white px-5 py-3 rounded-2xl shadow-sm border border-rose-100", children: [_jsx("span", { className: "text-[10px] font-black text-rose-300 uppercase tracking-widest", children: "Time Remaining:" }), _jsx("div", { className: "text-rose-500 font-black text-xl tabular-nums", children: "04:12:35" })] })] }), _jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8", children: saleBooks.map(book => (_jsx(BookCard, { book: book, onAddToCart: onAddToCart, onQuickView: onQuickView, onToggleWishlist: onToggleWishlist, isInWishlist: wishlist.some(w => w.id === book.id), onPlayTrailer: onPlayTrailer }, book.id))) })] }) })), _jsxs("section", { className: "py-24 bg-slate-900 text-white relative overflow-hidden", children: [_jsx("div", { className: "absolute inset-0 opacity-10 pointer-events-none", children: _jsx("div", { className: "absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,rgba(99,102,241,0.5)_0%,transparent_70%)]" }) }), _jsxs("div", { className: "max-w-4xl mx-auto px-4 relative z-10 text-center", children: [_jsxs("div", { className: "inline-flex items-center gap-2 px-3 py-1 bg-white/10 rounded-full text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-8", children: [_jsx(Lightbulb, { className: "w-3 h-3" }), "Lumina Intelligence"] }), _jsxs("h2", { className: "text-4xl font-serif font-bold mb-8", children: ["Why ", genre, " Matters Today"] }), _jsxs("div", { className: "bg-white/5 backdrop-blur-md border border-white/10 p-10 rounded-[3rem] relative", children: [_jsx(Sparkles, { className: "absolute -top-4 -right-4 w-12 h-12 text-indigo-400 opacity-50" }), loadingInsight ? (_jsxs("div", { className: "flex flex-col items-center gap-4 py-8", children: [_jsx(Loader2, { className: "w-8 h-8 animate-spin text-indigo-400" }), _jsx("p", { className: "text-indigo-200 animate-pulse", children: "Deepening our understanding..." })] })) : (_jsxs("p", { className: "text-xl text-slate-300 leading-relaxed font-light italic", children: ["\"", genreInsight, "\""] }))] }), _jsxs("div", { className: "grid grid-cols-3 gap-8 mt-16", children: [_jsxs("div", { className: "space-y-2", children: [_jsx(Users, { className: "w-6 h-6 text-indigo-400 mx-auto mb-4" }), _jsx("p", { className: "text-3xl font-serif font-bold", children: "12K+" }), _jsx("p", { className: "text-[10px] font-black uppercase tracking-widest text-slate-500", children: "Active Readers" })] }), _jsxs("div", { className: "space-y-2", children: [_jsx(BookOpen, { className: "w-6 h-6 text-indigo-400 mx-auto mb-4" }), _jsx("p", { className: "text-3xl font-serif font-bold", children: "850+" }), _jsx("p", { className: "text-[10px] font-black uppercase tracking-widest text-slate-500", children: "Curated Titles" })] }), _jsxs("div", { className: "space-y-2", children: [_jsx(Star, { className: "w-6 h-6 text-indigo-400 mx-auto mb-4" }), _jsx("p", { className: "text-3xl font-serif font-bold", children: "4.8" }), _jsx("p", { className: "text-[10px] font-black uppercase tracking-widest text-slate-500", children: "Avg. Rating" })] })] })] })] }), _jsx("section", { className: "py-24 bg-white", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4", children: [_jsxs("div", { className: "flex items-center gap-4 mb-12", children: [_jsx(Gem, { className: "w-8 h-8 text-indigo-300" }), _jsx("h2", { className: "text-3xl font-serif font-bold text-slate-900", children: "The Hidden Gems" })] }), _jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8", children: hiddenGems.map(book => (_jsx(BookCard, { book: book, onAddToCart: onAddToCart, onQuickView: onQuickView, onToggleWishlist: onToggleWishlist, isInWishlist: wishlist.some(w => w.id === book.id), onPlayTrailer: onPlayTrailer }, book.id))) })] }) }), _jsx("section", { className: "py-24 bg-slate-50", children: _jsxs("div", { className: "max-w-3xl mx-auto px-4", children: [_jsxs("div", { className: "text-center mb-16", children: [_jsxs("div", { className: "flex items-center justify-center gap-2 text-indigo-600 mb-4", children: [_jsx(HelpCircle, { className: "w-5 h-5" }), _jsx("span", { className: "text-[10px] font-black uppercase tracking-[0.3em]", children: "Common Queries" })] }), _jsx("h2", { className: "text-4xl font-serif font-bold text-slate-900", children: "Genre Wisdom" })] }), _jsx("div", { className: "space-y-6", children: faqs.map((faq, idx) => (_jsxs("div", { className: "bg-white p-8 rounded-3xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow", children: [_jsxs("h4", { className: "font-bold text-slate-800 mb-3 flex items-start gap-3", children: [_jsx("span", { className: "text-indigo-600", children: "Q." }), faq.q] }), _jsx("p", { className: "text-slate-500 text-sm leading-relaxed ml-6 font-light", children: faq.a })] }, idx))) })] }) })] }));
};
export default GenrePage;
